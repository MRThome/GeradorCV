<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <title>Document</title>
        <link rel="stylesheet" type="text/css" href="css/style.css">
    </head>

    <body>
        <h3>1. Dados Pessoais</h3>
        <tr>
            <td>Nome Completo:</td>
            <td><input type="text" name="nome" id="nome" size="40"> <br /></td>
            <td>Endereço:</td>
            <td><input type="text" name="endereco" id="endereco" size="40"> <br /></td>
            <td>Telefone:</td>
            <td><input type="text" name="telefone" id="telefone" size="40"> <br /></td>
            <td>Email:</td>
            <td><input type="text" name="email" id="email" size="40"> <br /></td>
            <td>Data de Nascimento (dd/mm/aa):</td>
            <td><input type="text" name="nascimento" id="nascimento" size="40"> <br /></td>
            <td>Nacionalidade:</td>
            <td><input type="text" name="nacionalidade" id="nacionalidade" size="40"> <br /></td>
            <td>Estado Civil:</td>
            <td><input type="text" name="estadocivil" id="estadocivil" size="40"> <br /></td>
        </tr>
        <h3>2. Objetivo</h3>
        <select name="objetivo" id="objetivo">
            <option value="-1"selected disabled>Selecione tipo de vaga</option>
            <option value="Menor Aprendiz">Aprendiz</option>
            <option value="Estágio">Estágio</option>
            <option value="Vaga efetiva">Efetivo</option>
        </select> <br>
        <h3>3. Escolaridade</h3>
        <select name="escolaridade" id="escolaridade">
            <option value="-1"selected disabled>Nível de escolaridade</option>
            <option value="Ensino Fundamental Incompleto">Ens. Fund. Incompl.</option>
            <option value="Ensino Fundamental Completo">Ens. Fund. Compl.</option>
            <option value="Ensino Médio Incompleto">Ens. Médio Incompl.</option>
            <option value="Ensino Médio Completo">Ens. Médio Compl.</option>
            <option value="Ensino Superior Incompleto">Ens. Sup. Incompl.</option>
            <option value="Ensino Superior Completo">Ens. Sup. Compl.</option>
            <option value="Ensino Técnico">Ens. Técnico</option>
        </select> <br>
        <h3>4. Graduação</h3>
        <td>Instituição de Ensino:</td>
        <td><input type="text" name="faculdade" id="faculdade" size="40"> <br /></td>
        <td>Curso:</td>
        <td><input type="text" name="curso" id="curso" size="40"> <br /></td>
        <td>Semestre:</td>
        <td><input type="text" name="semestre" id="semestre" size="40"> <br /></td>

        
        <button onclick="registerCV()">Gerar Currículo</button>
        <button onclick="verCVS()">Visualizar CVs</button>
    </body>
    <script>
        function registerCV() {
            const nome = document.getElementById("nome").value
            const endereco = document.getElementById("endereco").value
            const telefone = document.getElementById("telefone").value
            const email = document.getElementById("email").value
            const nascimento = document.getElementById("nascimento").value
            const nacionalidade = document.getElementById("nacionalidade").value
            const estadocivil = document.getElementById("estadocivil").value
            const objetivo = document.getElementById("objetivo").value
            const escolaridade = document.getElementById("escolaridade").value
            const faculdade = document.getElementById("faculdade").value
            const curso = document.getElementById("curso").value
            const semestre = document.getElementById("semestre").value

            axios.post('/registerCV', {
                nome: nome,
                endereco: endereco,
                telefone: telefone,
                email: email,
                nascimento: nascimento,
                nacionalidade: nacionalidade,
                estadocivil: estadocivil,
                objetivo: objetivo,
                escolaridade: escolaridade,
                faculdade: faculdade,
                curso: curso,
                semestre: semestre,
                userId: localStorage.getItem('userId_projectCv')
            }).then(x => {
                console.log(x)
                alert(x.data)
                window.location.href = "menu"
        })
                .catch(e => alert("Não foi possível gerar o currículo"));
        }
        function verCVS() {
            const userId = localStorage.getItem('userId_projectCv')
            window.location.href = `cvs/${userId}`
        }
    </script>

</html>